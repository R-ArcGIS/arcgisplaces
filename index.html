<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Search for POIs using ArcGIS Places Service • arcgisplaces</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Search for POIs using ArcGIS Places Service">
<meta property="og:description" content="The ArcGIS Places service is a ready-to-use location service that can search for businesses and geographic locations around the world. It allows you to find, locate, and discover detailed information about each place. Query for places near a point, within a bounding box, filter based on categories, or provide search text. arcgisplaces integrates with sf for out of the box compatibility with other spatial libraries. Learn more in the Places service API reference &lt;https://developers.arcgis.com/rest/places/&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">arcgisplaces</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="arcgisplaces">arcgisplaces<a class="anchor" aria-label="anchor" href="#arcgisplaces"></a>
</h1></div>
<!-- badges: start -->

<p>arcgisplaces is an R package to interface with <a href="https://developers.arcgis.com/rest/places/" class="external-link">ArcGIS Places Service</a>.</p>
<blockquote>
<p>The places service is a ready-to-use location service that can search for businesses and geographic locations around the world. It allows you to find, locate, and discover detailed information about each place.</p>
</blockquote>
<p>In order to use <code>{arcgisplaces}</code> you will need an ArcGIS Developers account. <a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/get-started/" class="external-link">Get started here.</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install a binary of the development version of arcgisplaces from <a href="https://r-arcgis.r-universe.dev/arcgisplaces" class="external-link">r-universe</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"arcgisgeocode"</span>, repos <span class="op">=</span> <span class="st">"https://r-arcgis.r-universe.dev"</span><span class="op">)</span></span></code></pre></div>
<p>You will also need the development version of <a href="https://github.com/R-ArcGIS/arcgisutils" class="external-link"><code>{arcgisutils}</code></a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"r-arcgis/arcgisutils"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="building-from-source">Building from source<a class="anchor" aria-label="anchor" href="#building-from-source"></a>
</h3>
<p>Or, you can install the development version from <a href="https://github.com/r-arcgis/arcgisplaces" class="external-link">GitHub</a>. Note the development version requires an installation of Rust. See <a href="https://rustup.rs/" class="external-link">rustup</a> for instructions to install Rust.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"r-arcgis/arcgisplaces"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Finding places:</p>
<ul>
<li>
<code><a href="reference/near_point.html">near_point()</a></code>: search for places near a location.</li>
<li>
<code><a href="reference/within_extent.html">within_extent()</a></code>: search for places within an extent.</li>
<li>
<code><a href="reference/place_details.html">place_details()</a></code>: get detailed information about the places returned from <code><a href="reference/near_point.html">near_point()</a></code> or <code><a href="reference/within_extent.html">within_extent()</a></code>.
<ul>
<li>Note: see <code>fields</code> for the possible attributes to return for place details.</li>
</ul>
</li>
</ul>
<p>Understanding categories:</p>
<ul>
<li><p><code><a href="reference/categories.html">categories()</a></code>: find categories by name or ID.</p></li>
<li><p><code><a href="reference/category_details.html">category_details()</a></code>: get detailed information about the categories returned from <code><a href="reference/categories.html">categories()</a></code>.</p></li>
<li><p>Find place attributes such as name, address, description, opening hours, price ratings, user ratings, and social links.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p><code>arcgisutils</code> is needed for authentication. The Places API supports either using an API key via <code><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_key()</a></code> or one generated via OAuth2 using either <code><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_client()</a></code> or <code><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_code()</a></code>. See <a href="https://developers.arcgis.com/rest/places/#authentication" class="external-link">API documentation</a> for more.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R-ArcGIS/arcgisutils" class="external-link">arcgisutils</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'arcgisutils'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     %||%</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">arcgisplaces</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Authenticate with a Developer Account API Key</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_key</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.esri.com/arcgisutils/reference/token.html" class="external-link">set_arc_token</a></span><span class="op">(</span><span class="va">token</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="place-search">Place search<a class="anchor" aria-label="anchor" href="#place-search"></a>
</h2>
<p>You can <strong>search for places near a location</strong> with <code><a href="reference/near_point.html">near_point()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coffee</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/near_point.html">near_point</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">122.334</span>, y <span class="op">=</span> <span class="fl">47.655</span>, search_text <span class="op">=</span> <span class="st">"Coffee"</span><span class="op">)</span></span>
<span><span class="va">coffee</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 5 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -1122.334 ymin: -952.345 xmax: 877.666 ymax: 1047.655</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt;                           place_id                                 name</span></span>
<span><span class="co">#&gt; 1 f6059fc575735b5e3f558c96ab69e6f6 Irwin's Neighborhood Bakery and Cafe</span></span>
<span><span class="co">#&gt; 2 88a10ccf031f02ef2697591f72e1e169                          Fuel Coffee</span></span>
<span><span class="co">#&gt; 3 a8c6da1aa0d08fe96e5d80d0f3b3de03                     Friday Afternoon</span></span>
<span><span class="co">#&gt; 4 906da2fe5164619199a2f2ba9c99a650                            Starbucks</span></span>
<span><span class="co">#&gt; 5 d49bac9ae79ebfc88dc2c070ad0ee91c                    HHD Heuk Hwa Dang</span></span>
<span><span class="co">#&gt; 6 4bdfa82268e67a698d0b8ea3d2df3853                          A Muddy Cup</span></span>
<span><span class="co">#&gt;   distance   categories icon                   geometry</span></span>
<span><span class="co">#&gt; 1     97.0 c("13002.... &lt;NA&gt; POINT (-122.3328 47.65539)</span></span>
<span><span class="co">#&gt; 2    723.8 c("13035.... &lt;NA&gt; POINT (-122.3369 47.66122)</span></span>
<span><span class="co">#&gt; 3    740.8 c("13036.... &lt;NA&gt;  POINT (-122.342 47.65895)</span></span>
<span><span class="co">#&gt; 4    767.3 13035, C.... &lt;NA&gt; POINT (-122.3361 47.66175)</span></span>
<span><span class="co">#&gt; 5    964.1 13033, B.... &lt;NA&gt; POINT (-122.3425 47.66153)</span></span>
<span><span class="co">#&gt; 6    964.2 c("13035.... &lt;NA&gt; POINT (-122.3255 47.66149)</span></span></code></pre></div>
<p>Locations are returned as an sf object with the place ID, the place name, distance from the search point, a character vector of categories.</p>
<blockquote>
<p>[!TIP]</p>
<p><code>arcgisplaces</code> will return an sf object, but the sf package is not required to work with the package. The <code>sf</code> print method will not be used unless the package is loaded. If package size is a consideration—i.e. deploying an app in a Docker container—consider using <code>wk</code> or <code>rsgeo</code>.</p>
</blockquote>
<p>Details for the places can be fetched using <code><a href="reference/place_details.html">place_details()</a></code>. The possible fields are <a href="https://developers.arcgis.com/rest/places/place-id-get/#requestedfields" class="external-link">documented online</a> as well as contained in the exported vector <code>fields</code>. Because pricing is dependent upon which fields are requested, it is a required argument.</p>
<p>To get the add <code>requested_fields = "hours"</code>. Note, that the other possible fields will still be present in the result, but completely empty.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">details</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/place_details.html">place_details</a></span><span class="op">(</span></span>
<span>  <span class="va">coffee</span><span class="op">$</span><span class="va">place_id</span>,</span>
<span>  requested_fields <span class="op">=</span> <span class="st">"rating"</span>,</span>
<span>  .progress <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># remove progress bar</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">details</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"user"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: Inf ymin: Inf xmax: -Inf ymax: -Inf</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt;      price user    location</span></span>
<span><span class="co">#&gt; 1    Cheap  4.0 POINT EMPTY</span></span>
<span><span class="co">#&gt; 2    Cheap  3.9 POINT EMPTY</span></span>
<span><span class="co">#&gt; 3 Moderate   NA POINT EMPTY</span></span>
<span><span class="co">#&gt; 4    Cheap  3.4 POINT EMPTY</span></span>
<span><span class="co">#&gt; 5     &lt;NA&gt;   NA POINT EMPTY</span></span>
<span><span class="co">#&gt; 6    Cheap  3.9 POINT EMPTY</span></span></code></pre></div>
<p>Or, you can search for places within a bounding box using <code><a href="reference/within_extent.html">within_extent()</a></code>. This could be quite handy for searching within current map bounds, for example.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bakeries</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/within_extent.html">within_extent</a></span><span class="op">(</span></span>
<span>  <span class="op">-</span><span class="fl">70.356</span>, <span class="fl">43.588</span>, <span class="op">-</span><span class="fl">70.176</span>, <span class="fl">43.7182</span>,</span>
<span>  category_id <span class="op">=</span> <span class="st">"13002"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">bakeries</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; Simple feature collection with 29 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -70.356 ymin: 43.588 xmax: -70.176 ymax: 43.7182</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                       name                   geometry</span></span>
<span><span class="co">#&gt; 1           Crumbl Cookies POINT (-70.33067 43.67675)</span></span>
<span><span class="co">#&gt; 2       Electric Bike Cafe  POINT (-70.2864 43.63655)</span></span>
<span><span class="co">#&gt; 3  Gross Confection Bakery POINT (-70.25428 43.65763)</span></span>
<span><span class="co">#&gt; 4           Dina’s Cuisine POINT (-70.28725 43.67695)</span></span>
<span><span class="co">#&gt; 5           Lolli and Pops POINT (-70.33512 43.63377)</span></span>
<span><span class="co">#&gt; 6    C Salt Gourmet Market  POINT (-70.2271 43.59174)</span></span>
<span><span class="co">#&gt; 7          Bread &amp; Friends POINT (-70.25693 43.65514)</span></span>
<span><span class="co">#&gt; 8     BenReuben’s Knishery POINT (-70.25299 43.63748)</span></span>
<span><span class="co">#&gt; 9        Katie Made Bakery POINT (-70.24992 43.66449)</span></span>
<span><span class="co">#&gt; 10           Cinnamon Girl POINT (-70.27412 43.68086)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=arcgisplaces" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing arcgisplaces</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Josiah Parry <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9910-865X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Josiah Parry.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
