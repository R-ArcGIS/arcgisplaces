<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Search for POIs using ArcGIS Places Service • arcgisplaces</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Search for POIs using ArcGIS Places Service">
<meta name="description" content="The ArcGIS Places service is a ready-to-use location service that can search for businesses and geographic locations around the world. It allows you to find, locate, and discover detailed information about each place. Query for places near a point, within a bounding box, filter based on categories, or provide search text. arcgisplaces integrates with sf for out of the box compatibility with other spatial libraries. Learn more in the Places service API reference &lt;https://developers.arcgis.com/rest/places/&gt;.">
<meta property="og:description" content="The ArcGIS Places service is a ready-to-use location service that can search for businesses and geographic locations around the world. It allows you to find, locate, and discover detailed information about each place. Query for places near a point, within a bounding box, filter based on categories, or provide search text. arcgisplaces integrates with sf for out of the box compatibility with other spatial libraries. Learn more in the Places service API reference &lt;https://developers.arcgis.com/rest/places/&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">arcgisplaces</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="arcgisplaces">arcgisplaces<a class="anchor" aria-label="anchor" href="#arcgisplaces"></a>
</h1></div>
<!-- badges: start -->

<p>arcgisplaces is an R package to interface with <a href="https://developers.arcgis.com/rest/places/" class="external-link">ArcGIS Places Service</a>.</p>
<blockquote>
<p>The places service is a ready-to-use location service that can search for businesses and geographic locations around the world. It allows you to find, locate, and discover detailed information about each place.</p>
</blockquote>
<p>In order to use <code>{arcgisplaces}</code> you will need an ArcGIS Developers account. <a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/get-started/" class="external-link">Get started here.</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install a binary of the development version of arcgisplaces from <a href="https://r-arcgis.r-universe.dev/arcgisplaces" class="external-link">r-universe</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"arcgisplaces"</span>, repos <span class="op">=</span> <span class="st">"https://r-arcgis.r-universe.dev"</span><span class="op">)</span></span></code></pre></div>
<p>You will also need the development version of <a href="https://github.com/R-ArcGIS/arcgisutils" class="external-link"><code>{arcgisutils}</code></a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"r-arcgis/arcgisutils"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="building-from-source">Building from source<a class="anchor" aria-label="anchor" href="#building-from-source"></a>
</h3>
<p>Or, you can install the development version from <a href="https://github.com/r-arcgis/arcgisplaces" class="external-link">GitHub</a>. Note the development version requires an installation of Rust. See <a href="https://rustup.rs/" class="external-link">rustup</a> for instructions to install Rust.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"r-arcgis/arcgisplaces"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Finding places:</p>
<ul>
<li>
<code><a href="reference/near_point.html">near_point()</a></code>: search for places near a location.</li>
<li>
<code><a href="reference/within_extent.html">within_extent()</a></code>: search for places within an extent.</li>
<li>
<code><a href="reference/place_details.html">place_details()</a></code>: get detailed information about the places returned from <code><a href="reference/near_point.html">near_point()</a></code> or <code><a href="reference/within_extent.html">within_extent()</a></code>.
<ul>
<li>Note: see <code>fields</code> for the possible attributes to return for place details.</li>
</ul>
</li>
</ul>
<p>Understanding categories:</p>
<ul>
<li><p><code><a href="reference/categories.html">categories()</a></code>: find categories by name or ID.</p></li>
<li><p><code><a href="reference/category_details.html">category_details()</a></code>: get detailed information about the categories returned from <code><a href="reference/categories.html">categories()</a></code>.</p></li>
<li><p>Find place attributes such as name, address, description, opening hours, price ratings, user ratings, and social links.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p><a href="https://github.com/R-ArcGIS/arcgisutils" class="external-link">arcgisutils</a> is needed for authentication. The Places API supports either using an API key via <code><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_key()</a></code> or one generated via OAuth2 using either <code><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_client()</a></code> or <code><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_code()</a></code>. See the <a href="https://developers.arcgis.com/rest/places/#authentication" class="external-link">Places API documentation</a> for more.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R-ArcGIS/arcgisutils" class="external-link">arcgisutils</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">arcgisplaces</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Authenticate with a Developer Account API Key</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_key</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.esri.com/arcgisutils/reference/token.html" class="external-link">set_arc_token</a></span><span class="op">(</span><span class="va">token</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="place-search">Place search<a class="anchor" aria-label="anchor" href="#place-search"></a>
</h2>
<p>You can <strong>search for places near a location</strong> with <code><a href="reference/near_point.html">near_point()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coffee</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/near_point.html">near_point</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">122.334</span>, y <span class="op">=</span> <span class="fl">47.655</span>, search_text <span class="op">=</span> <span class="st">"Coffee"</span><span class="op">)</span></span>
<span><span class="va">coffee</span></span>
<span><span class="co">#&gt; Simple feature collection with 8 features and 5 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -122.3426 ymin: 47.65539 xmax: -122.3255 ymax: 47.66175</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; # A data frame: 8 × 6</span></span>
<span><span class="co">#&gt;   place_id             name  distance categories icon              geometry</span></span>
<span><span class="co">#&gt; * &lt;chr&gt;                &lt;chr&gt;    &lt;dbl&gt; &lt;I&lt;list&gt;&gt;  &lt;chr&gt;          &lt;POINT [°]&gt;</span></span>
<span><span class="co">#&gt; 1 f6059fc575735b5e3f5… Irwi…      97  &lt;df&gt;       &lt;NA&gt;  (-122.3328 47.65539)</span></span>
<span><span class="co">#&gt; 2 88a10ccf031f02ef269… Fuel…     724. &lt;df&gt;       &lt;NA&gt;  (-122.3369 47.66122)</span></span>
<span><span class="co">#&gt; 3 5cc2d40bf37bff28738… Youn…     728. &lt;df&gt;       &lt;NA&gt;  (-122.3331 47.66152)</span></span>
<span><span class="co">#&gt; 4 a8c6da1aa0d08fe96e5… Frid…     741. &lt;df&gt;       &lt;NA&gt;   (-122.342 47.65895)</span></span>
<span><span class="co">#&gt; 5 906da2fe5164619199a… Star…     767. &lt;df&gt;       &lt;NA&gt;  (-122.3361 47.66175)</span></span>
<span><span class="co">#&gt; 6 957c39de6e0a0eb8afe… Mosa…     774  &lt;df&gt;       &lt;NA&gt;  (-122.3276 47.66048)</span></span>
<span><span class="co">#&gt; 7 4bdfa82268e67a698d0… A Mu…     964. &lt;df&gt;       &lt;NA&gt;  (-122.3255 47.66149)</span></span>
<span><span class="co">#&gt; 8 090286b411e3337850e… The …     976. &lt;df&gt;       &lt;NA&gt;  (-122.3426 47.66162)</span></span></code></pre></div>
<p>Locations are returned as an sf object with the place ID, the place name, distance from the search point, a character vector of categories.</p>
<blockquote>
<p>[!TIP]</p>
<p><code>arcgisplaces</code> will return an sf object, but the sf package is not required to work with the package. The <code>sf</code> print method will not be used unless the package is loaded. If package size is a consideration—i.e. deploying an app in a Docker container—consider using <code>wk</code> or <code>rsgeo</code>.</p>
</blockquote>
<p>Details for the places can be fetched using <code><a href="reference/place_details.html">place_details()</a></code>. The possible fields are <a href="https://developers.arcgis.com/rest/places/place-id-get/#requestedfields" class="external-link">documented online</a> as well as contained in the exported vector <code>fields</code>. Because pricing is dependent upon which fields are requested, it is a required argument.</p>
<p>To get the add <code>requested_fields = "hours"</code>. Note, that the other possible fields will still be present in the result, but completely empty.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">details</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/place_details.html">place_details</a></span><span class="op">(</span></span>
<span>  <span class="va">coffee</span><span class="op">$</span><span class="va">place_id</span>,</span>
<span>  requested_fields <span class="op">=</span> <span class="st">"rating"</span>,</span>
<span>  .progress <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># remove progress bar</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">details</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"user"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; Simple feature collection with 8 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: Inf ymin: Inf xmax: -Inf ymax: -Inf</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; # A data frame: 8 × 3</span></span>
<span><span class="co">#&gt;   price     user    location</span></span>
<span><span class="co">#&gt; * &lt;chr&gt;    &lt;dbl&gt; &lt;POINT [°]&gt;</span></span>
<span><span class="co">#&gt; 1 Cheap      4.1       EMPTY</span></span>
<span><span class="co">#&gt; 2 Cheap      3.9       EMPTY</span></span>
<span><span class="co">#&gt; 3 &lt;NA&gt;      NA         EMPTY</span></span>
<span><span class="co">#&gt; 4 Moderate  NA         EMPTY</span></span>
<span><span class="co">#&gt; 5 Cheap      3.4       EMPTY</span></span>
<span><span class="co">#&gt; 6 Cheap      3         EMPTY</span></span>
<span><span class="co">#&gt; 7 Cheap      4         EMPTY</span></span>
<span><span class="co">#&gt; 8 &lt;NA&gt;      NA         EMPTY</span></span></code></pre></div>
<p>Or, you can search for places within a bounding box using <code><a href="reference/within_extent.html">within_extent()</a></code>. This could be quite handy for searching within current map bounds, for example.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bakeries</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/within_extent.html">within_extent</a></span><span class="op">(</span></span>
<span>  <span class="op">-</span><span class="fl">70.356</span>, <span class="fl">43.588</span>, <span class="op">-</span><span class="fl">70.176</span>, <span class="fl">43.7182</span>,</span>
<span>  category_id <span class="op">=</span> <span class="st">"13002"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">bakeries</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; Simple feature collection with 24 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -70.356 ymin: 43.588 xmax: -70.176 ymax: 43.7182</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; # A data frame: 24 × 2</span></span>
<span><span class="co">#&gt;    name                                geometry</span></span>
<span><span class="co">#&gt;  * &lt;chr&gt;                            &lt;POINT [°]&gt;</span></span>
<span><span class="co">#&gt;  1 Panera Bread            (-70.32966 43.67791)</span></span>
<span><span class="co">#&gt;  2 Crumbl Cookies          (-70.33067 43.67675)</span></span>
<span><span class="co">#&gt;  3 Electric Bike Cafe       (-70.2864 43.63655)</span></span>
<span><span class="co">#&gt;  4 BenReuben’s Knishery    (-70.25299 43.63748)</span></span>
<span><span class="co">#&gt;  5 Two Fat Cats Bakery      (-70.26101 43.6327)</span></span>
<span><span class="co">#&gt;  6 Auntie Anne's           (-70.33517 43.63372)</span></span>
<span><span class="co">#&gt;  7 Lolli and Pops          (-70.33512 43.63377)</span></span>
<span><span class="co">#&gt;  8 Panera Bread              (-70.3303 43.6367)</span></span>
<span><span class="co">#&gt;  9 Cookie Jar Pastry Shop  (-70.22644 43.63367)</span></span>
<span><span class="co">#&gt; 10 Bake Maine Pottery Cafe (-70.25334 43.66708)</span></span>
<span><span class="co">#&gt; # ℹ 14 more rows</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=arcgisplaces" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing arcgisplaces</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Josiah Parry <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9910-865X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Josiah Parry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
